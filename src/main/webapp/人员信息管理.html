<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<title>layout 后台大布局 - Layui</title>
		<link rel="stylesheet" href="static/layui/css/layui.css">
		<script src="static/jQuery/jquery-3.4.1.min.js"></script>
		<script src="static/layui/layui.all.js"></script>
		<script src="js/httpReq.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/人员信息管理.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body class="layui-layout-body">
		<div class="layui-layout layui-layout-admin">
			<div class="layui-header">
				<div class="layui-logo">港轮驳公司管理系统</div>
				<ul class="layui-nav layui-layout-right">
<!--=======================================《用户名》 ===================================================-->
					<li class="layui-nav-item">
						<a href="javascript:void(0);">欢迎您 贤心</a>
					</li>
					<li class="layui-nav-item"><a href="Login.html">注销</a></li>
<!--========================================《用户名》===================================================-->				
				</ul>
			</div>
			<div class="layui-side layui-bg-black">
				<div class="layui-side-scroll">
					<!-- 左侧导航区域（可配合layui已有的垂直导航） -->
					<ul class="layui-nav layui-nav-tree" lay-filter="test">
<!--==========================================================================================-->						
						<li class="layui-nav-item layui-nav-itemed">
							<a class="" href="javascript:void(0);">船舶管理</a>
							<dl class="layui-nav-child">
								<dd><a href="进出港信息.html">进出港信息</a></dd>
								<dd><a href="进出航审查.html">进出港审查</a></dd>
							</dl>
						</li>
<!--==========================================================================================-->						
						<li class="layui-nav-item layui-nav-itemed">
							<a href="javascript:void(0);">船员管理</a>
							<dl class="layui-nav-child">
								<dd><a href="部门管理.html">部门管理</a></dd>
								<dd><a href="人员信息管理.html">人员信息管理</a></dd>
							</dl>
						</li>
<!--==========================================================================================-->						
						<li class="layui-nav-item">
							<a href="javascript:void(0);">拖轮信息</a>
							<dl class="layui-nav-child">
								<dd><a href="拖轮状态.html">拖轮状态</a></dd>
								<dd><a href="保养管理.html">保养管理</a></dd>
							</dl>
						</li>
<!--==========================================================================================-->						
						<li class="layui-nav-item">
							<a href="javascript:void(0);">材料库存</a>
							<dl class="layui-nav-child">
								<dd><a href="库存统计.html">库存统计</a></dd>
								<dd><a href="入库与出库.html">入库与出库</a></dd>
							</dl>
						</li>
<!--==========================================================================================-->						
						<li class="layui-nav-item">
							<a href="拖轮调度.html">拖轮调度</a>
						</li>
<!--==========================================================================================-->						
						<li class="layui-nav-item">
							<a href="船舶维修.html">船舶维修</a>
						</li>
<!--==========================================================================================-->						
						<li class="layui-nav-item">
							<a href="javascript:void(0);">计费</a>
							<dl class="layui-nav-child">
								<dd><a href="船舶维修计费.html">船舶维修计费</a></dd>
								<dd><a href="拖轮引航计费.html">拖轮引航计费</a></dd>
								<dd><a href="材料采购计费.html">材料采购计费</a></dd>
							</dl>
						</li>
<!--==========================================================================================-->						
					</ul>
				</div>
			</div>
<!--==========================================================================================-->
			<div class="layui-body">
				<script type="text/html" id="toolbarDemo">
					<div class="layui-btn-container">
						<button type="button" class="layui-btn" onclick="insert()">添加信息</button>
					</div>
				</script>
				<!-- 内容主体区域 -->
				<!-- 数据表格 -->
                <div class="demoTable">
					<script type="text/html" id="barDemo">
						<a class="layui-btn layui-btn-xs layui-btn-normal" lay-event="edit" onclick="update()">编辑</a>
						<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
					</script>
                </div>

                <table class="layui-hide" id="test" lay-filter="test"></table>

            </div>
		</div>
<!--==========================================================================================-->
		<div class="update" style="display: none;">
			<div style="border-radius:15px; padding:10px; padding-left:40px; padding-right:40px; ">
				<fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
					<legend>部门信息</legend>
				</fieldset>
				<form class="layui-form layui-form-pane"lay-filter="example" action="" id="myForm">
					<div class="layui-form-item" style="display: none">
						<label class="layui-form-label">ID</label>
						<div class="layui-input-inline ">
							<input type="text" id="id" name="id" value="" disabled="" lay-verify="required" autocomplete="off"
								   class="layui-input ">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">姓名</label>
						<div class="layui-input-inline">
							<input type="text" id="name" name="name"  lay-verify="required" placeholder="请输入部门名称"
								   autocomplete="off" class="layui-input layui-btn-disabled">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">年龄</label>
						<div class="layui-input-inline">
							<input type="text" id="age" name="age" lay-verify="required" placeholder="请输入部门人数"
								   autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">性别</label>
						<div class="layui-input-inline">
							<input type="text" id="sex" name="sex" lay-verify="required" placeholder="请输入部门人数"
								   autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">工资</label>
						<div class="layui-input-inline">
							<input type="text" id="sal" name="sal" lay-verify="required" placeholder="部门负责人"
								   autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">状态</label>
						<div class="layui-input-inline">
							<input type="text" id="status" name="status" lay-verify="required" placeholder="部门负责人"
								   autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">入职时间</label>
						<div class="layui-input-inline">
							<input type="text" id="dataline" name="dataline"disabled="" lay-verify="required" placeholder="部门负责人"
								   autocomplete="off" class="layui-input layui-btn-disabled">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">职业</label>
						<div class="layui-input-inline">
							<input type="text" id="post" name="post" lay-verify="required" placeholder="部门负责人"
								   autocomplete="off" class="layui-input">
						</div>
					</div>
					<button style="position: absolute; margin-left:80px; margin-bottom: 15px;" class="layui-btn" lay-submit=""
							lay-filter="demo1" onclick="updateTrue()">立即修改</button>
					<button style="position: absolute; margin-left:360px; margin-bottom: 15px; background:red" class="layui-btn" onclick="endinsert()">取消</button>
				</form>
			</div>
		</div>
		<!--==========================================================================================-->
		<div class="insert" style="display: none;">
			<div style="border-radius:15px; padding:10px; padding-left:40px; padding-right:40px; ">
				<fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
					<legend>添加信息</legend>
				</fieldset>
				<form class="layui-form layui-form-pane" lay-filter="example" id="myForm">

				</form>
			</div>
		</div>
		<!--==========================================================================================-->
		<script>
			//JavaScript代码区域
			layui.use('element', function() {
				var element = layui.element;

			});
		</script>
		<script type="text/javascript">
		//人员信息
		var table = layui.table,
			layer = layui.layer,
			form = layui.form
		layui.use('table', function() {
			var table = layui.table;

			//方法级渲染
			table.render({
				method: 'post',
				elem: '#test',
				contentType: 'application/json',
				dataType: 'json',
                where:{'status': 0},
				loading: 'true',
				url: user.defaultUrl + myurl.userList ,
				toolbar: '#toolbarDemo',
				title: '用户数据表',
				totalRow: true,
				initSort: {
					field: 'id' //排序字段，对应 cols 设定的各字段名
					,type: 'asc' //排序方式  asc: 升序、desc: 降序、null: 默认排序
				},
				text: {
					none: '小小数据去哪了？'
				},
				autoSort: 'true',
				// skin: 'row',
				// even: false,
				size: 'lg',
			    cols: [[
			      {field:'id', width:'8%', title: 'ID', sort: true, align: 'center', fixed: true}
			      ,{field:'name', width:'10%', title: '姓名', align: 'center'}
			      ,{field:'age', width:'8%', title: '年龄', sort: true, align: 'center'}
			      ,{field:'sex', width:'8%', title: '性别', align: 'center'}
			      ,{field:'sal', title: '工资', width: '10%', minWidth: 100, align: 'center'}
			      ,{field:'dataline',width: '20%', title: '入职时间', sort: true, align: 'center'}
			      ,{field:'status',width: '15%', title: '状态', sort: true, align: 'center', templet:'#manager_status'}
			      ,{field:'post', title: '职业', align: 'center'}
			      ,{fixed: 'right', title:'操作', toolbar: '#barDemo', width:150}
			    ]],
                done: function(res, curr, count){
				    console.log(res);
                    console.log(res.data[0].status);
                    // common.form({
					// 	type:{
					// 		title:'性别',
					// 		type:'radio',
					// 		value:[0,1],
					// 		radioTitle:['男','女']
					// 	},
					// 	id:{
					// 		title:'ID',
					// 		type:'text',
					// 		verify:'required'
					// 	}
					// })
					// form.render()
                },
                id: 'test',
				page: true,
				limit: 15,
				limits: [5, 10, 15],
			});
			//监听行工具事件
			table.on('tool(test)', function(obj){
				var data = obj.data;
				//console.log(obj)
				if(obj.event === 'del'){
					layer.confirm('真的删除行么', function(index){
						alert(data.id)
						req.post(myurl.userDel, {id: data.id} , false)
						layer.close(index);
						table.reload('test');
					});
				} else if(obj.event === 'edit'){
					form = layui.form
					form.val('example', {
						"id": data.id,
						'name': data.name,
						'age': data.age,
						'sex': data.sex,
						'sal': data.sal,
						'status': data.status,
						'dataline': data.dataline,
						'post': data.post,
					});
					update();
				}
			})
		});
		</script>
		<script type="text/html" id="manager_status">
			{{#  if(d.status ==1 ){ }}
			<span class="layui-btn layui-btn-xs" style="background: orangered; width: 50%">工作中</span>
			{{#  } else { }}
			<span class="layui-btn layui-btn-xs" style="background: lawngreen; width: 50%">无工作</span>
			{{#  } }}
		</script>
	</body>
</html>
