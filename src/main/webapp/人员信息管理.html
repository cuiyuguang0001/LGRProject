<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<title>layout 后台大布局 - Layui</title>
		<link rel="stylesheet" href="static/layui/css/layui.css">
		<script src="static/jQuery/jquery-3.4.1.min.js"></script>
		<script src="static/layui/layui.js"></script>
		<script src="js/httpReq.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body class="layui-layout-body">
		<div class="layui-layout layui-layout-admin">
			<div class="layui-header">
				<div class="layui-logo">港轮驳公司管理系统</div>
				<ul class="layui-nav layui-layout-right">
<!--=======================================《用户名》 ===================================================-->
					<li class="layui-nav-item">
						<a href="javascript:void(0);">欢迎您 贤心</a>
					</li>
					<li class="layui-nav-item"><a href="Login.html">注销</a></li>
<!--========================================《用户名》===================================================-->				
				</ul>
			</div>
			<div class="layui-side layui-bg-black">
				<div class="layui-side-scroll">
					<!-- 左侧导航区域（可配合layui已有的垂直导航） -->
					<ul class="layui-nav layui-nav-tree" lay-filter="test">
<!--==========================================================================================-->						
						<li class="layui-nav-item layui-nav-itemed">
							<a class="" href="javascript:void(0);">船舶管理</a>
							<dl class="layui-nav-child">
								<dd><a href="进出港信息.html">进出港信息</a></dd>
								<dd><a href="进出航审查.html">进出港审查</a></dd>
							</dl>
						</li>
<!--==========================================================================================-->						
						<li class="layui-nav-item layui-nav-itemed">
							<a href="javascript:void(0);">船员管理</a>
							<dl class="layui-nav-child">
								<dd><a href="部门管理.html">部门管理</a></dd>
								<dd><a href="人员信息管理.html">人员信息管理</a></dd>
							</dl>
						</li>
<!--==========================================================================================-->						
						<li class="layui-nav-item">
							<a href="javascript:void(0);">拖轮信息</a>
							<dl class="layui-nav-child">
								<dd><a href="拖轮状态.html">拖轮状态</a></dd>
								<dd><a href="保养管理.html">保养管理</a></dd>
							</dl>
						</li>
<!--==========================================================================================-->						
						<li class="layui-nav-item">
							<a href="javascript:void(0);">材料库存</a>
							<dl class="layui-nav-child">
								<dd><a href="库存统计.html">库存统计</a></dd>
								<dd><a href="入库与出库.html">入库与出库</a></dd>
							</dl>
						</li>
<!--==========================================================================================-->						
						<li class="layui-nav-item">
							<a href="拖轮调度.html">拖轮调度</a>
						</li>
<!--==========================================================================================-->						
						<li class="layui-nav-item">
							<a href="船舶维修.html">船舶维修</a>
						</li>
<!--==========================================================================================-->						
						<li class="layui-nav-item">
							<a href="javascript:void(0);">计费</a>
							<dl class="layui-nav-child">
								<dd><a href="船舶维修计费.html">船舶维修计费</a></dd>
								<dd><a href="拖轮引航计费.html">拖轮引航计费</a></dd>
								<dd><a href="材料采购计费.html">材料采购计费</a></dd>
							</dl>
						</li>
<!--==========================================================================================-->						
					</ul>
				</div>
			</div>
<!--==========================================================================================-->
			<div class="layui-body">
				<!-- 内容主体区域 -->
				<!-- 数据表格 -->
                <div class="demoTable">
					<script type="text/html" id="barDemo">
						<a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
						<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
					</script>
                </div>

                <<table class="layui-hide" id="test" lay-filter="test"></table>
            </div>
<!--==========================================================================================-->
		</div>
		<script>
			//JavaScript代码区域
			layui.use('element', function() {
				var element = layui.element;

			});
		</script>
		<script type="text/javascript">
		//人员信息
		var table = layui.table,
			layer = layui.layer,
			form = layui.form
		layui.use('table', function() {
			var table = layui.table;

			//方法级渲染
			table.render({
				method: 'post',
				elem: '#test',
				contentType: 'application/json',
				dataType: 'json',
                where:{'status': 0},
				loading: 'true',
				url: user.defaultUrl + myurl.userList ,
				toolbar: '#toolbarDemo',
				title: '用户数据表',
				totalRow: true,
				initSort: {
					field: 'id' //排序字段，对应 cols 设定的各字段名
					,type: 'asc' //排序方式  asc: 升序、desc: 降序、null: 默认排序
				},
				text: {
					none: '小小数据去哪了？'
				},
				autoSort: 'true',
				// skin: 'row',
				// even: false,
				size: 'lg',
			    cols: [[
			      {field:'id', width:'8%', title: 'ID', sort: true, align: 'center', fixed: true}
			      ,{field:'name', width:'8%', title: '姓名'}
			      ,{field:'age', width:'8%', title: '年龄', sort: true, align: 'center'}
			      ,{field:'sex', width:'8%', title: '性别'}
			      ,{field:'sal', title: '工资', width: '10%', minWidth: 100, align: 'center'}
			      ,{field:'dataline',width: '15%', title: '入职时间', sort: true, align: 'center'}
			      ,{field:'status',width: '10%', title: '状态', sort: true, align: 'center'}
			      ,{field:'post', title: '职业', align: 'center'}
			      ,{field:'list', width:137, title: '职位优先级', sort: true, align: 'center'}
			      ,{fixed: 'right', title:'操作', toolbar: '#barDemo', width:150}
			    ]],
                done: function(res, curr, count){
				    console.log(res);
                    console.log(res.data[0].status);
                },
                id: 'testReload',
				page: true,
				limit: 15,
				limits: [5, 10, 15],
			});
			//监听行工具事件
			table.on('tool(test)', function(obj){
				var data = obj.data;
				//console.log(obj)
				if(obj.event === 'del'){
					layer.confirm('真的删除行么', function(index){
						alert(data.id)
						req.post(myurl.userDel, {id: data.id} , false)
						// obj.del();
						layer.close(index);
					});
				} else if(obj.event === 'edit'){
					layer.prompt({
						formType: 2
						,value: data.email
					}, function(value, index){
						obj.update({
							email: value
						});
						layer.close(index);
					});
				}
			});
		});
		</script>
	</body>
</html>
